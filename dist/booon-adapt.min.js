"use strict";!function(){let{isArray:t,from:e}=Array,{defineProperty:n,keys:s,freeze:o,entries:i}=Object;String.prototype.sw=String.prototype.startsWith;class a{constructor(n){n.options||(n.options={});const s=this;s._options=o(n),["methods","watch","options","validate"].forEach((t=>o(n[t]||{}))),s._changedAttrs=new Set,s._data=l(s,n.data||{},n.methods||{});const i=()=>{n.el instanceof Element?s._el=[n.el]:n.el instanceof NodeList||t(n.el)&&n.el.every((t=>t instanceof Element))?s._el=e(n.el):"string"==typeof n.el&&(s._el=e(document.querySelectorAll(n.el)));let o=!1;if(s._el&&0!=s._el.length&&!s._el.some((t=>t==document.body||t==document.body.parentElement))||(o=!0),!o){const t=new Set;for(const e of s._el){let n=e.parentNode;for(;n;)t.add(n),n=n.parentNode}s._el.some((e=>t.has(e)))&&(o=!0)}if(o)throw new Error("no valid el");p(s),r(s),n.init&&n.init.apply(s)};"complete"==document.readyState?i():document.addEventListener("DOMContentLoaded",i)}}const r=t=>{t._timeout||(t._timeout=setTimeout((()=>{h(t),t._timeout=null}),20))},l=(i,a,l)=>{let h;i._usedAttributes={};const p=t=>{if(t.sw("_"))throw new Error("no '_'-keys")};return i._cachedData={},s(a).forEach((e=>{p(e);const s=a[e];if("function"==typeof s)return i._usedAttributes[e]=null,void n(i,e,{get:()=>i._cachedData[e]});const o=()=>{u(i,e,s,s),r(i)};t(s)?d(s,o):"object"==typeof s&&c(s,o),n(i,e,{set:n=>{const s=a[e],l=f(i,e,n);void 0!==l&&(l!==n&&r(i),n=l),t(n)?d(n,o):"object"==typeof n&&c(n,o),a[e]=n,s!==n&&(u(i,e,s,n),r(i))},get:()=>(h&&h.add(e),a[e])})})),s(l).forEach((t=>{p(t),n(i,t,{get:()=>l[t]})})),s(i._usedAttributes).forEach((t=>{h=new Set;const n=a[t].apply(i);h.size||(i._cachedData[t]=n),i._usedAttributes[t]=e(h),h.forEach((t=>i._changedAttrs.add(t)))})),h=null,o(i._usedAttributes),a},c=(e,o)=>{s(e).forEach((s=>{e._data||(n(e,"_data",{writable:!0}),e._data={}),e._data.hasOwnProperty(s)||(t(e[s])?d(e[s],o):"object"==typeof e[s]&&c(e[s],o),e._data[s]=e[s],n(e,s,{set:n=>{t(n)?d(n,o):"object"==typeof n&&c(n,o),e._data[s]=n,o()},get:()=>e._data[s]}))}))},d=(e,s)=>{e.custo||(["push","pop","shift","unshift","splice","sort","reverse"].forEach((t=>{n(e,t,{enumerable:!1,configurable:!1,writable:!1,value:function(...n){Array.prototype[t].apply(e,n),o(),s()}})})),e.custo=!0);const o=()=>{e.forEach((e=>{t(e)?d(e,s):"object"==typeof e&&c(e,s)}))};o()},u=(t,e,n,s)=>{const o=t._options.watch;o&&o[e]&&o[e].apply(t,[s,n]),t._changedAttrs.add(e)},f=(t,e,n)=>{const s=t._options.validate;if(s&&s[e])return s[e].apply(t,[n])},h=e=>{i(e._usedAttributes).forEach((t=>{t[1].some((t=>e._changedAttrs.has(t)))&&(e._cachedData[t[0]]=e._data[t[0]].apply(e))})),e._changedAttrs.clear(),e._updateFunctions.forEach((n=>{const s=n.node,o=n.dir,a=n.attribute;if(1==s.nodeType){const i=n.func.apply(e),r=m(i);if("bind"==o){if("object"!=typeof i)s.getAttribute(a)!==r&&s.setAttribute(a,r);else if("class"==a)if(s.setAttribute(a,""),t(i))i.forEach((t=>{t&&s.classList.add(t)}));else for(const t in i)i[t]&&s.classList.add(t);n.initClass&&n.initClass.forEach((t=>s.classList.add(t)))}else if("model"==o)"input"==s.tagName.toLowerCase()&&"checkbox"==s.type?s.checked!==i&&(s.checked=i):"input"==s.tagName.toLowerCase()&&"radio"==s.type?s.checked!==(s.value==r)&&(s.checked=s.value==r):s.value!==r&&(s.value=r);else if("text"==o)s.innerText!==r&&(s.innerText=r);else if("html"==o)s.innerHTML!==r&&(s.innerHTML=r);else if("visible"==o)s.style.display=i?"":"none";else if("style"==o){s.setAttribute("style","");for(const t in i)s.style[t]=i[t];n.initStyle&&s.setAttribute("style",n.initStyle+s.getAttribute("style"))}}else if(3==s.nodeType){let t=n.expression;i(n.areas).forEach((n=>{t=t.split(n[0]).join(m(n[1].apply(e)))})),s.textContent=t}}))},p=t=>{const n=[],s=e=>{(e=>{if(1==e.nodeType){const t=e.getAttributeNames();for(const n of t){if(b.includes(n)&&e.getAttribute(n))return!0;if(y.some((t=>n.sw(t))))return!0}}else if(3==e.nodeType){const n=t._options.options.startTag||"{{",s=t._options.options.endTag||"}}",o=_(n,e.textContent),i=_(s,e.textContent);if(o.length&&o.length==i.length){for(let t=0;t<o.length;t++)if(o[t]+n.length>=i[t])return!1;return!0}}})(e)&&n.push(e),e.childNodes.forEach(s)},o=t=>{const e=[];let n;for(;-1!==(n=t.lastIndexOf("."));)e.push(t.slice(n+1)),t=t.slice(0,n);return e.reverse()};t._el.forEach(s),t._updateFunctions=n.map((n=>{const s={};if(s.node=n,1==n.nodeType){const i=n.getAttributeNames(),a=e=>{const o=n.getAttribute(e);s.func=g(t,o),n.removeAttribute(e)};i.forEach((i=>{if(i.sw("b-bind:")||i.sw(":"))s.dir="bind",s.attribute=i.slice(i.indexOf(":")+1),"class"==s.attribute&&(s.initClass=e(n.classList)),a(i);else if("b-model"==i||i.sw("b-model.")){s.dir="model";const e=n.getAttribute(i).trim(),r=n.tagName.toLowerCase(),l=o(i);n.addEventListener(l.includes("lazy")?"change":"input",(function(){"input"==r&&"checkbox"==n.type?t[e]=this.checked:t[e]=this.value})),a(i)}else if("b-text"==i)s.dir="text",a(i);else if("b-html"==i)s.dir="html",a(i);else if("b-visible"==i)s.dir="visible",a(i);else if("b-style"==i){s.dir="style";const t=n.getAttribute("style");t&&(s.initStyle=t,s.initStyle.endsWith(";")||(s.initStyle+=";")),a(i)}else if(i.sw("b-on:")||i.sw("@")){let e=i.slice(Math.max(i.indexOf(":"),i.indexOf("@"))+1);const a=e.indexOf(".");a>=0&&(e=e.slice(0,a));const r=g(t,n.getAttribute(i),!0),l=o(i),c={once:l.includes("once"),capture:l.includes("capture")};n.addEventListener(e,(e=>{t._event=e,r.apply(t),delete t._event}),c),n.removeAttribute(i),s.func=()=>{}}}))}else{s.expression=n.textContent,s.areas={};const e=t._options.options.startTag||"{{",o=t._options.options.endTag||"}}",i=_(e,n.textContent),a=_(o,n.textContent);for(let r=0;r<a.length;r++){const l=n.textContent.substring(i[r],a[r]+o.length),c=l.slice(e.length,l.length-o.length);s.areas[l]=g(t,c)}}return s}))},b=["b-text","b-html","b-visible","b-style"],y=["b-on:","@","b-bind:",":","b-model"],_=(t,e)=>{const n=t.length;if(0==n)return[];let s,o=0,i=[];for(;(s=e.indexOf(t,o))>-1;)i.push(s),o=s+n;return i},g=(t,e,n)=>{e=e.trim();const o=s(t._options.data||{}),i=t=>"let "+t+"=this."+t+";";let a="";o.forEach((t=>{e.includes(t)&&(a+=i(t))})),s(t._options.methods||{}).forEach((t=>{e.includes(t)&&(a+=i(t))}));let r=";";o.forEach((t=>{e.includes(t)&&(r+="if("+t+"!==this."+t+")this."+t+"="+t+";")}));let l=a+(n?"":"return ");n&&(l="const $event=this._event;"+l);if(!!(t._options.methods||{})[e]||e.endsWith(")")&&!e.sw("(")&&1==(e.match(/\)/g)||"").length&&1==(e.match(/\(/g)||"").length)if(e.endsWith(")")){const t=e.indexOf("(");l+=e.slice(0,t)+".apply(this,["+e.slice(t+1,e.length-1)+"])"}else l+=e+".apply(this"+(n?",[$event]":"")+")";else l+=e;return n&&(l+=r),new Function(l)},m=t=>"object"==typeof t?JSON.stringify(t):t+"";window.booon||(window.booon={}),booon.adapt=t=>new a(t)}();